import{c as J,d as Q}from"./chunk-ISY3Z2ME.js";import{$ as v,$a as R,B as x,C as h,Ca as $,D as d,Da as O,G as b,H as S,O as r,Qa as y,Sa as j,T as N,Ta as V,U as u,V as s,Va as G,Wa as A,Xa as B,Y as I,Ya as P,Z as g,Za as H,_,_a as K,aa as m,ab as q,ba as p,bb as L,ca as F,eb as z,fa as T,ga as w,ha as a,ka as D,la as l,ma as C,ra as k,sa as E,ua as W,xa as M,y as f}from"./chunk-XPVSHVWV.js";function tt(e,t){if(e&1&&F(0,"input",6),e&2){let o=a().$implicit;s("formControlName",o)}}function et(e,t){if(e&1&&(m(0,"option",8),l(1),p()),e&2){let o=t.$implicit;s("value",o),r(),C(o)}}function it(e,t){if(e&1&&(m(0,"select",7),_(1,et,2,2,"option",8,g),p()),e&2){let o=a().$implicit,n=a().ngIf;s("formControlName",o),r(),v(n[o].options)}}function nt(e,t){if(e&1&&(m(0,"div",3)(1,"span",5),l(2),p(),u(3,tt,1,1)(4,it,3,1),p()),e&2){let o,n=t.$implicit,i=a().ngIf;r(2),C(i[n].title),r(),I(3,(o=i[n].controlType)==="input"?3:o==="select"?4:-1)}}function ot(e,t){if(e&1){let o=T();m(0,"div")(1,"div",2),_(2,nt,5,2,"div",3,g),p(),m(4,"button",4),w("click",function(){b(o);let i=a();return S(i.saveSettings())}),l(5,"Save"),p()()}if(e&2){let o=a();r(),s("formGroup",o.form),r(),v(o.settingsKeys()),r(2),s("disabled",o.submitting())}}function rt(e,t){e&1&&l(0,` Loading...
`)}var X=(()=>{let t=class t{constructor(){this._settingsService=x(J),this.form=new B({}),this.settings$=this._settingsService.settings$,this.settingsKeys=M(()=>{let n=this._settingsService.settings();return n?Object.keys(n):[]}),this.submitting=N(!1)}ngOnInit(){this._settingsHandler()}ngOnDestroy(){this._settingsSub?.unsubscribe()}saveSettings(){this.form.invalid||(this.submitting.set(!0),this._settingsService.save(this.form.value).subscribe(()=>this.submitting.set(!1)))}_settingsHandler(){this._settingsSub=this.settings$.subscribe(n=>{for(let i in n){let c=n[i];this._addControlToForm(i,c.value)}})}_addControlToForm(n,i){let c=new P(i,[V.required]);this.form.addControl(n,c)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=h({type:t,selectors:[["app-settings-wrapper"]],decls:4,vars:4,consts:[["loading",""],[4,"ngIf","ngIfElse"],[1,"pb-4",3,"formGroup"],[1,"d-flex","flex-column","gap-1"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"fs-6"],["type","text","customInput","",1,"border",3,"formControlName"],[1,"border","rounded-2","px-1",3,"formControlName"],[3,"value"]],template:function(i,c){if(i&1&&(u(0,ot,6,2,"div",1),k(1,"async"),u(2,rt,1,0,"ng-template",null,0,W)),i&2){let Z=D(3);s("ngIf",E(1,2,c.settings$))("ngIfElse",Z)}},dependencies:[$,Q,q,L,j,R,G,A,H,K,O],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0});let e=t;return e})();var st=[{path:"",component:X}],Y=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=d({type:t}),t.\u0275inj=f({imports:[y.forChild(st),y]});let e=t;return e})();var Tt=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=d({type:t}),t.\u0275inj=f({imports:[Y,z]});let e=t;return e})();export{Tt as SettingsModule};
